;; shlyfile for ngn

(load "ngn.asd")
(ql:quickload :ngn)

(load "ngn-test.asd")
(ql:quickload :ngn-test)
(ql:quickload :cl-test-more)


;; app name
(defvar *app-name* "ngn")

;; toplevel function
(defvar *app-toplevel* #'ngn:app)

;; save application
(defun save-app ()
  #+sbcl (sb-ext:save-lisp-and-die *app-name*
								   :toplevel *app-toplevel*
								   :executable t)
  #+clisp (ext:saveinitmem *app-name*
						   :quiet t
						   :norc t
						   :init-function (lambda ()
											(funcall *app-toplevel*)
											(ext:exit))
						   :executable t)
  #+ccl (ccl:save-application *app-name*
							  :toplevel-function *app-toplevel*
							  :prepend-kernel t))
	
;; test all
(defun test ()
  (cl-test-more:run-test-all))

